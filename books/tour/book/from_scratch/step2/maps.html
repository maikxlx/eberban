<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Maps - A tour of Eberban</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../res/leipzig.min.css">
        <link rel="stylesheet" href="../../res/style.css">
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.</strong> Morphonology</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../morphonology/morphology.html"><strong aria-hidden="true">2.1.</strong> Morphology</a></li><li class="chapter-item expanded "><a href="../../morphonology/phonology.html"><strong aria-hidden="true">2.2.</strong> Phonology</a></li></ol></li><li class="chapter-item expanded "><a href="../../logic/intro.html"><strong aria-hidden="true">3.</strong> Logic framework</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../logic/chaining.html"><strong aria-hidden="true">3.1.</strong> Chaining</a></li><li class="chapter-item expanded "><a href="../../logic/explicit_binding.html"><strong aria-hidden="true">3.2.</strong> Explicit binding (VI/FI/SI)</a></li><li class="chapter-item expanded "><a href="../../logic/sentences.html"><strong aria-hidden="true">3.3.</strong> Sentences (p-)</a></li><li class="chapter-item expanded "><a href="../../logic/primitives.html"><strong aria-hidden="true">3.4.</strong> Logical primitives (MI)</a></li><li class="chapter-item expanded "><a href="../../logic/transformations.html"><strong aria-hidden="true">3.5.</strong> Predicate transformations (ZI)</a></li><li class="chapter-item expanded "><a href="../../logic/default.html"><strong aria-hidden="true">3.6.</strong> Default arguments</a></li></ol></li><li class="chapter-item expanded "><a href="../../dictionary_conventions.html"><strong aria-hidden="true">4.</strong> Dictionary conventions</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Additional grammar</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../grammar/discourse.html"><strong aria-hidden="true">5.1.</strong> Discourse predicates (MI)</a></li><li class="chapter-item expanded "><a href="../../grammar/borrowings.html"><strong aria-hidden="true">5.2.</strong> Borrowings (u-)</a></li><li class="chapter-item expanded "><a href="../../grammar/compounds.html"><strong aria-hidden="true">5.3.</strong> Compounds</a></li><li class="chapter-item expanded "><a href="../../grammar/quotes.html"><strong aria-hidden="true">5.4.</strong> Quotes (c-)</a></li><li class="chapter-item expanded "><a href="../../grammar/lists.html"><strong aria-hidden="true">5.5.</strong> Lists (BU)</a></li><li class="chapter-item expanded "><a href="../../grammar/numbers.html"><strong aria-hidden="true">5.6.</strong> Numbers (TI/j-)</a></li><li class="chapter-item expanded "><a href="../../grammar/annotations.html"><strong aria-hidden="true">5.7.</strong> Annotations (d-)</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Important concepts</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.</strong> Data structures</div></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.1.</strong> Sets</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.1.2.</strong> Maps</div></li></ol></li><li class="chapter-item expanded "><a href="../../concepts/time.html"><strong aria-hidden="true">6.2.</strong> Time</a></li></ol></li><li class="chapter-item expanded "><a href="../../writing/intro.html"><strong aria-hidden="true">7.</strong> Writing systems</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../writing/linear.html"><strong aria-hidden="true">7.1.</strong> Linear writing system</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.2.</strong> Planar writing system</div></li></ol></li><li class="chapter-item expanded "><a href="../../from_scratch/intro.html"><strong aria-hidden="true">8.</strong> Eberban from scratch</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../from_scratch/step1.html"><strong aria-hidden="true">8.1.</strong> Core grammar</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.2.</strong> Core vocabulary</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../from_scratch/step2/simple.html"><strong aria-hidden="true">8.2.1.</strong> Few simple predicates</a></li><li class="chapter-item expanded "><a href="../../from_scratch/step2/sets.html"><strong aria-hidden="true">8.2.2.</strong> Sets</a></li><li class="chapter-item expanded "><a href="../../from_scratch/step2/pairs.html"><strong aria-hidden="true">8.2.3.</strong> Pairs</a></li><li class="chapter-item expanded "><a href="../../from_scratch/step2/idents.html"><strong aria-hidden="true">8.2.4.</strong> Identifiers</a></li><li class="chapter-item expanded "><a href="../../from_scratch/step2/lists.html"><strong aria-hidden="true">8.2.5.</strong> Lists</a></li><li class="chapter-item expanded "><a href="../../from_scratch/step2/maps.html" class="active"><strong aria-hidden="true">8.2.6.</strong> Maps</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.2.7.</strong> Natural numbers</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.2.8.</strong> Integer numbers</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.2.9.</strong> Real numbers</div></li><li class="chapter-item expanded "><a href="../../from_scratch/step2/time.html"><strong aria-hidden="true">8.2.10.</strong> Time</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.2.11.</strong> Letters and words</div></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.3.</strong> Extended vocabulary</div></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">A tour of Eberban</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="maps"><a class="header" href="#maps">Maps</a></h1>
<p><strong>Maps</strong> (also called <strong>dictionaries</strong>) are another important data structure
that contains 0 to many <strong>entries</strong> composed of a <strong>key</strong> and a <strong>value</strong>, with
the additional constraint that there cannot be 2 different entries with the same
key.</p>
<p>Maps are usefull in many cases where many informations must be aggregated into a
single thing and easily accessible (pairs are verbose to use when deeply nested,
and lists requires to associate values to indexes which cannot be skipped). Maps
are an obvious choice for context parameters, as they allow to easily implement
new concepts by storing information in the map with a new dedicated key.</p>
<blockquote>
<p>kcin: <code>[E:ma]</code> is a map.</p>
<pre><code>po kcin ke be
</code></pre>
<p><strong>ke</strong> is either an empty map (represented by <code>zai kcin</code>)</p>
<pre><code>vare
  vie ke zai kcin
</code></pre>
<p>Or a pair with a left identifier</p>
<pre><code>  fia ma
    vi ke sea kin zai kcin
</code></pre>
<p>And as right part a set of pairs with left parts (keys) being symbols</p>
<pre><code>    fi ke seo kin tcei sea kin ma
</code></pre>
<p>And it is false that there are multiple entries with the same key</p>
<pre><code>    fi bi ma
      vi bo ka tcie soe kin ke
      fi bo ko tcie soe kin ke
      fi ka bi ko
      fi ka sea kin sae kin ko
</code></pre>
</blockquote>
<blockquote>
<p>kcil: <code>[E:kcin]</code> is the empty map.</p>
<pre><code>po kcil zai kcin
</code></pre>
</blockquote>
<p>We can then interact more directly with entries using the following:</p>
<blockquote>
<p>kce: <code>[E:a]</code> is the value in map <code>[A:kcin]</code> for key <code>[O:ma]</code>.</p>
<pre><code>po kce ke ka ko be
tcie
  va soe kin ka kcin
  fe kin
    ve ko
    fa ke
</code></pre>
</blockquote>
<p>Finally we set the empty map as the context parameter for future sentences.</p>
<blockquote>
<pre><code>pae kcil
</code></pre>
</blockquote>
<p>We can make a variant of <em>kce</em> to directly access a value stored in the
context.</p>
<blockquote>
<p>kcei: <code>[E:a]</code> is the value in the context map for key <code>[A:ma]</code>.</p>
<pre><code>po kcei ke ka be
mue vie ki be ke kce
  va ki
  fo ka
</code></pre>
</blockquote>
<p>Future predicates will thus be able to modify the context with a specific key
without messing with other predicates relying on the context (by using their own
different key).</p>
<h2 id="map-operations"><a class="header" href="#map-operations">Map operations</a></h2>
<p>It is then useful to be able to make a map from another one with some
modification.</p>
<blockquote>
<p>kcani: <code>[E:kcin]</code> is obtained from <code>[A:kcin]</code> by removing the entry with key
<code>[O:ma]</code>. If <code>[A]</code> don't have entry with key <code>[O]</code> then <code>[E]</code> = <code>[A]</code>.</p>
<pre><code>po kcani ke ka ko be
</code></pre>
<p>The set of entries of <em>ke</em> is the largest subset of the set of entries of <em>ka</em>
that doesn't contain an entry with key <em>ko</em>.</p>
<pre><code>ke kcin seo kin djo
  via ke be ma
    vi ke tcai soe kin ka
    fi bi ke sae tci sae kin ko
</code></pre>
</blockquote>
<blockquote>
<p>kcoi: <code>[E:kcin]</code> is obtained from <code>[A:kcin]</code> by inserting an entry with key
<code>[O:ma]</code> and value <code>[U:ma]</code>. If <code>[A]</code> have an entry with key <code>[O]</code> then it is
removed to insert the entry with key <code>[O]</code> and value <code>[U]</code>. </p>
<pre><code>po kcoi ke ka ko ku be
</code></pre>
<p>Given <em>x</em> the map obtained from <em>ka</em> by removing an entry with key <em>ko</em>, The
set of entries of <em>ke</em> is the smallest superset of <em>x</em> such as <em>ke</em> have as
member an entry with key <em>ko</em> and value <em>ku</em>.</p>
<pre><code>ke kcin seo kin dju
  via ke be kcoi
    va ka
    fo ko
    fe seo kin tcai ke sae tci kin
      ve ko
      fo ku
</code></pre>
</blockquote>
<blockquote>
<p>kcui: <code>[E:kcin]</code> is obtained from <code>[A:kcin]</code> by transforming the value of
entry with key <code>[O:ma]</code> using relation <code>[U:(a,a)]</code>. It implies that <code>[A]</code> must
have an entry with key <code>[O]</code>.</p>
<pre><code>po kcui ke ka ko gu be
ke kcoi
  va ka
  fo ko
  fu gu kce
    va ka
    fo ko
</code></pre>
</blockquote>
<h2 id="ergonomic-map-operations"><a class="header" href="#ergonomic-map-operations">Ergonomic map operations</a></h2>
<p>The above predicates are pretty verbose to use, especially if multiple
operations must be performed in a row. For that reason we're going to define
more ergonomic versions that manage the transformed map using the context. The
predicate <code>kca</code> will take as arguments the input and output maps and <strong>a list of
0-ary predicates</strong>. This list will be folded and evaluated with a modified
context containing the input and output map (at each step of the iteration),
which will be used by predicates taking the other parameters explicitly (key and
value, no need to take input and output as they are retreived from the context).</p>
<blockquote>
<p>kca: <code>[E:kcin]</code> represents a map that can be optained from <code>[A:kcin]</code> by
applying the list of transformations <code>[O:blu ()]</code>.</p>
<pre><code>po kca ke ka ko be
</code></pre>
<p>We fold the list <em>ko</em> with input <em>ke</em>, output <em>ka</em> and predicate
<em>(kie,kia,gia)</em>, <em>kie</em> and <em>kia</em> being the input/intermediary/output maps and
<em>gia</em> being one of the proposition in the list (they are folded in order).</p>
<pre><code>ko bla
  va ke
  fo ka
  fiu kie kia gia be
</code></pre>
<p>We take the current context <em>ki</em></p>
<pre><code>    mue vie ki be   
</code></pre>
<p>And evaluate <em>gia</em> (the proposition in the list) with a context that is
obtained from <em>ki</em> by inserting the pair <em>(kie,kia)</em> at key <em>zai kca</em>.</p>
<pre><code>      mua
        va gia
        fe kcoi
          va ki
          fo zai kca
          fu kin
            va kie
            fo kia
</code></pre>
</blockquote>
<p>We can then write predicates that uses this pair instead of taking arguments.</p>
<blockquote>
<p>kcan: Remove entry with key <code>[E:ma]</code>.</p>
<pre><code>po kcan ke be
ke so kcani
  va sae kin kcei zai kca
  fe soe kin kcei zai kca   
</code></pre>
</blockquote>
<blockquote>
<p>kco: Insert entry with key <code>[E:ma]</code> and value <code>[A:a]</code>.</p>
<pre><code>po kco ke ka be
ke so kcoi
  va sae kin kcei zai kca
  fe soe kin kcei zai kca   
  fo ka
</code></pre>
</blockquote>
<blockquote>
<p>kcu: Transform entry with key <code>[E:ma]</code> with value relation (old,new)
<code>[A:(a,a)]</code>.</p>
<pre><code>po kcu ke ga be
ke so kcui
  va sae kin kcei zai kca
  fe soe kin kcei zai kca   
  fo ga
</code></pre>
</blockquote>
<blockquote>
<p>With these predicates we can write stuff like:</p>
<pre><code>po ga ke ka be
ke kca
  va ka
  fo zai ti kcan
  bu zai te kco ma
  bu zai ta kcu tcia
</code></pre>
<p><em>ka</em> is thus <em>ke</em> with:</p>
<ul>
<li>Key <em>zai ti</em> removed</li>
<li>Key <em>zai te</em> inserted with some atom as value</li>
<li>Key <em>zai ta</em> transformed such that the old value is a subset of the new
value</li>
</ul>
</blockquote>
<p>Since we use maps for context it is fairly common to evaluate a proposition
with a modified context. We can make a predicate make that easier.</p>
<blockquote>
<p>kcar: Transformations <code>[E:blu ()]</code> are applied on the context before it is
used to evaluate <code>[A:()]</code>.</p>
<pre><code>po kcar ke gia be
mue
  ve ki be mua
    va gia
    fe kca
      va ki
      fo ke
</code></pre>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../from_scratch/step2/lists.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../../from_scratch/step2/time.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../from_scratch/step2/lists.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../../from_scratch/step2/time.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../../res/leipzig.min.js"></script>
        <script type="text/javascript" src="../../res/leipzig_apply.js"></script>
    </body>
</html>
